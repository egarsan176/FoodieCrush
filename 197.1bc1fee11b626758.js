"use strict";(self.webpackChunkFoodieCrush=self.webpackChunkFoodieCrush||[]).push([[197],{3197:(ee,Z,d)=>{d.r(Z),d.d(Z,{RegisterModule:()=>K});var _=d(9808),v=d(7656);function T(e,o,r,n,a,i,s){try{var l=e[i](s),f=l.value}catch(u){return void r(u)}l.done?o(f):Promise.resolve(f).then(n,a)}var c=d(2382),I=d(5226),C=d.n(I),t=d(1223),N=d(8827);let E=(()=>{class e{constructor(){this.nombreApellidoPattern="([a-zA-Z]+) ([a-zA-Z]+)",this.emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",this.passwordPattern="^(?=.*[0-9]+.*)(?=.*[a-zA-Z]+.*)[0-9a-zA-Z]{6,}$"}camposIguales(r,n){return a=>{var i,s,l,f;return(null===(i=a.get(r))||void 0===i?void 0:i.value)!==(null===(s=a.get(n))||void 0===s?void 0:s.value)?(null===(l=a.get(n))||void 0===l||l.setErrors({noIguales:!0}),{noIguales:!0}):(null===(f=a.get(n))||void 0===f||f.setErrors(null),null)}}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var q=d(4004),R=d(262),M=d(9646),Y=d(2340),V=d(520);let O=(()=>{class e{constructor(r){this.httpClient=r,this.urlBase=Y.N.urlBase}validate(r){return this.checkEmail(r.value).pipe((0,q.U)(a=>null!=a.email?{emailTomado:!0}:null),(0,R.K)(a=>(0,M.of)(null)))}checkEmail(r){return this.httpClient.get(`${this.urlBase}/user/${r}`)}}return e.\u0275fac=function(r){return new(r||e)(t.LFG(V.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var z=d(6583),J=d(1970);function D(e,o){if(1&e&&(t.TgZ(0,"span",33),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.nameErrorMsg," ")}}function B(e,o){if(1&e&&(t.TgZ(0,"span",33),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.emailErrorMsg," ")}}function Q(e,o){if(1&e&&(t.TgZ(0,"span",33),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.userNameErrorMsg," ")}}function L(e,o){if(1&e&&(t.TgZ(0,"span",33),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.passwordErrorMsg," ")}}function G(e,o){1&e&&(t.TgZ(0,"span",33),t._uU(1," Las contrase\xf1as deben de ser iguales. "),t.qZA())}function $(e,o){1&e&&(t.TgZ(0,"span",33),t._UZ(1,"br"),t._uU(2," Debes aceptar los t\xe9rminos y condiciones "),t.qZA())}const k=[{path:"",component:(()=>{class e{constructor(r,n,a,i,s){this.fb=r,this.accessService=n,this.validatorService=a,this.emailValidator=i,this.router=s,this.user={fullName:"",username:"",email:"",password:""},this.miFormulario=this.fb.group({fullName:["",[c.kI.required,c.kI.pattern(this.validatorService.nombreApellidoPattern)]],email:["",[c.kI.required,c.kI.pattern(this.validatorService.emailPattern)],[this.emailValidator]],username:["",[c.kI.required,c.kI.min(5)]],password:["",[c.kI.required,c.kI.pattern(this.validatorService.passwordPattern)]],password2:["",[c.kI.required]],condiciones:[!1,c.kI.requiredTrue]},{validators:[this.validatorService.camposIguales("password","password2")]})}get emailErrorMsg(){var r;const n=null===(r=this.miFormulario.get("email"))||void 0===r?void 0:r.errors;return n.required?"El email es obligatorio":n.pattern?"El valor ingresado no tiene formato de correo":n.emailTomado?"Este email ya est\xe1 registrado en el sistema":""}get userNameErrorMsg(){var r;const n=null===(r=this.miFormulario.get("username"))||void 0===r?void 0:r.errors;return n.required?"El nombre de usuario es obligatorio":n.min?"Debe tener como m\xednimo 5 caracteres":""}get nameErrorMsg(){var r;const n=null===(r=this.miFormulario.get("fullName"))||void 0===r?void 0:r.errors;return n.required?"Este campo es obligatorio":n.pattern?"Debe introducir un nombre y un apellido":""}get passwordErrorMsg(){var r;const n=null===(r=this.miFormulario.get("password"))||void 0===r?void 0:r.errors;return n.required?"Este campo es obligatorio":n.pattern?"M\xednimo 6 caracteres, una letra y un n\xfamero":""}ngOnInit(){this.miFormulario.reset(Object.assign(Object.assign({},this.user),{condiciones:!1})),this.miFormulario.valueChanges.subscribe(r=>{var a=function F(e,o){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)o.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(r,["condiciones"]);this.user=a})}campoNoValido(r){var n,a;return(null===(n=this.miFormulario.get(r))||void 0===n?void 0:n.invalid)&&(null===(a=this.miFormulario.get(r))||void 0===a?void 0:a.touched)}findInvalidControlsRecursive(r){var n=[];let a=i=>{Object.keys(i.controls).forEach(s=>{const l=i.get(s);(null==l?void 0:l.invalid)&&n.push(s),(l instanceof c.cw||l instanceof c.Oe)&&a(l)})};return a(r),n}register(){var r=this;return function P(e){return function(){var o=this,r=arguments;return new Promise(function(n,a){var i=e.apply(o,r);function s(f){T(i,n,a,s,l,"next",f)}function l(f){T(i,n,a,s,l,"throw",f)}s(void 0)})}}(function*(){r.miFormulario.markAllAsTouched(),r.miFormulario.valid&&r.accessService.register(r.miFormulario.value).subscribe({next:a=>{localStorage.setItem("token",a.access_token),r.accessService.getUsuario(),r.miFormulario.reset({fullName:"",email:"",username:"",password:"",condiciones:!1}),C().fire({title:"Ya forma parte de la familia FoodieCrush",icon:"success",confirmButtonText:"Acceder"}).then(i=>{i.isConfirmed&&r.router.navigateByUrl("publicar")})},error:a=>{C().fire("Error",a.error.mensaje,"error")}})})()}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(c.qu),t.Y36(N.v),t.Y36(E),t.Y36(O),t.Y36(v.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-register"]],decls:59,vars:8,consts:[[1,"row"],[1,"col-lg-6"],[1,"m-3"],[1,"card"],[1,"card-header","colorYellowP","m-2"],[1,"card-heading","text-center"],[1,"card-body"],[1,"mb-2"],[1,"text-muted","text-sm","mb-1","d-none","d-md-block","d-sm-block"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["formControlName","fullName","id","floatingName","type","text","placeholder","Nombre del usuario",1,"form-control"],["class","form-text text-danger",4,"ngIf"],["for","floatingName"],["id","floatingInput","formControlName","email","type","email","placeholder","name@example.com",1,"form-control"],["for","floatingInput"],["id","floatingUser","type","text","placeholder","nombre de usuario","formControlName","username",1,"form-control"],["for","floatingUser"],["id","floatingPassword","type","password","placeholder","Password","formControlName","password",1,"form-control"],["for","floatingPassword"],["id","floatingPassword","type","password","placeholder","Confirmar la contrase\xf1a","formControlName","password2",1,"form-control"],[1,"form-check","mb-3"],["type","checkbox","formControlName","condiciones","id","flexCheckDefault",1,"form-check-input"],["for","flexCheckDefault",1,"form-check-label"],["href","#"],[1,"form-group"],["type","submit","type","submit",1,"btn","colorPurpleP",3,"disabled"],[1,"card-footer","colorYellowP","m-2"],[1,"text-sm","text-muted"],["routerLink","/login"],[1,"col-lg-6","text-center","m-auto","pb-2","d-none","d-md-block","d-sm-block"],["src","assets/img/pagRegister.jpg","alt","Manos de mujer echando harina a un bol",1,"img-thumbnail","img-responsive","imgLogin"],["ubicacion","Registro"],[1,"form-text","text-danger"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t._uU(6,"Foodie Crush Register"),t.qZA(),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"h5",7),t._uU(9," \xdanete a nuestra comunidad "),t.qZA(),t.TgZ(10,"p",8),t._uU(11,"Podr\xe1s publicar tus recetas para que todo el mundo pueda disfrutarla en sus casas. \xa1No esperes m\xe1s!"),t.qZA(),t.TgZ(12,"form",9),t.NdJ("ngSubmit",function(){return n.register()}),t.TgZ(13,"div",10),t._UZ(14,"input",11),t.YNc(15,D,2,1,"span",12),t.TgZ(16,"label",13),t._uU(17,"Nombre"),t.qZA(),t.qZA(),t.TgZ(18,"div",10),t._UZ(19,"input",14),t.YNc(20,B,2,1,"span",12),t.TgZ(21,"label",15),t._uU(22,"Direcci\xf3n correo electr\xf3nico"),t.qZA(),t.qZA(),t.TgZ(23,"div",10),t._UZ(24,"input",16),t.YNc(25,Q,2,1,"span",12),t.TgZ(26,"label",17),t._uU(27,"Nombre de usuario"),t.qZA(),t.qZA(),t.TgZ(28,"div",10),t._UZ(29,"input",18),t.YNc(30,L,2,1,"span",12),t.TgZ(31,"label",19),t._uU(32,"Contrase\xf1a"),t.qZA(),t.qZA(),t.TgZ(33,"div",10),t._UZ(34,"input",20),t.YNc(35,G,2,0,"span",12),t.TgZ(36,"label",19),t._uU(37,"Confirmar contrase\xf1a"),t.qZA(),t.qZA(),t.TgZ(38,"div",21),t._UZ(39,"input",22),t.TgZ(40,"label",23),t._uU(41,"Estoy de acuerdo con los "),t.TgZ(42,"a",24),t._uU(43,"T\xe9rminos y Condiciones"),t.qZA(),t._uU(44,"."),t.qZA(),t.YNc(45,$,3,0,"span",12),t.qZA(),t.TgZ(46,"div",25),t.TgZ(47,"button",26),t._uU(48,"Registrarse"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",27),t.TgZ(50,"div",28),t._uU(51,"\xbfYa tienes una cuenta? "),t.TgZ(52,"a",29),t._uU(53,"Entra aqu\xed"),t.qZA(),t._uU(54,"."),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",30),t._UZ(56,"img",31),t.qZA(),t.qZA(),t._UZ(57,"app-scroll-to-top",32),t._UZ(58,"app-font-size")),2&r&&(t.xp6(12),t.Q6J("formGroup",n.miFormulario),t.xp6(3),t.Q6J("ngIf",n.campoNoValido("fullName")),t.xp6(5),t.Q6J("ngIf",n.campoNoValido("email")),t.xp6(5),t.Q6J("ngIf",n.campoNoValido("username")),t.xp6(5),t.Q6J("ngIf",n.campoNoValido("password")),t.xp6(5),t.Q6J("ngIf",n.campoNoValido("password2")),t.xp6(10),t.Q6J("ngIf",n.campoNoValido("condiciones")),t.xp6(2),t.Q6J("disabled",n.miFormulario.invalid))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,_.O5,c.Wl,v.yS,z.H,J.G],styles:["@media screen and (min-width: 481px) and (max-width: 810px){.imgLogin[_ngcontent-%COMP%]{width:35%}}@media screen and (min-width: 811px) and (max-width: 2100px){.imgLogin[_ngcontent-%COMP%]{width:60%}}"]}),e})()}];let X=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[v.Bz.forChild(k)],v.Bz]}),e})();var H=d(4466);let K=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[O,E],imports:[[_.ez,X,c.UX,H.m]]}),e})()}}]);