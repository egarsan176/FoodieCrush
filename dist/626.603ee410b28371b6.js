"use strict";(self.webpackChunkFoodieCrush=self.webpackChunkFoodieCrush||[]).push([[626],{9626:(E,p,s)=>{s.r(p),s.d(p,{MostrarFormuModule:()=>N});var c=s(9808),d=s(7656),Z=s(5226),u=s.n(Z),e=s(1223),_=s(2938),g=s(162),m=s(520);const h=function(o){return{width:o}};function f(o,i){if(1&o&&(e.TgZ(0,"div",7),e.TgZ(1,"div",8),e._uU(2),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(3,h,t.progress+"%")),e.uIk("aria-valuenow",t.progress),e.xp6(1),e.hij(" ",t.progress,"% ")}}function T(o,i){if(1&o&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.message)}}let v=(()=>{class o{constructor(t){this.uploadService=t,this.progress=0,this.message="",this.mostrar=!1}ngOnInit(){this.fileInfos=this.uploadService.getFiles()}selectFile(t){this.selectedFiles=t.target.files}upload(){if(this.progress=0,this.selectedFiles){const t=this.selectedFiles.item(0);t&&(this.currentFile=t,this.uploadService.upload(this.currentFile).subscribe({next:r=>{r.type===m.dt.UploadProgress?this.progress=Math.round(100*r.loaded/r.total):r instanceof m.Zn&&(localStorage.setItem("imgNAME",t.name),this.message=r.body.message,this.fileInfos=this.uploadService.getFiles(),this.mostrar=!0)},error:r=>{u().fire("Error",r.error.message,"error"),this.progress=0,this.message=r.error&&r.error.message?r.error.message:"No se ha podido subir el archivo",this.currentFile=void 0}})),this.selectedFiles=void 0}}deleteFile(t){this.uploadService.deleteFile(t),this.fileInfos=this.uploadService.getFiles()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.J))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-archivo-upload"]],decls:10,vars:3,consts:[[1,"row","mb-3"],[1,"col-form-label"],["type","file",1,"mt-2",3,"change"],[1,"col-4"],[1,"btn","colorPinkP",3,"disabled","click"],["class","progress my-3",4,"ngIf"],["class","alert alert-secondary","role","alert",4,"ngIf"],[1,"progress","my-3"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info","progress-bar-striped","colorGreenP","text-black",3,"ngStyle"],["role","alert",1,"alert","alert-secondary"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"label",1),e._uU(2," Sube aqu\xed una imagen de tu receta "),e._UZ(3,"br"),e.TgZ(4,"input",2),e.NdJ("change",function(a){return r.selectFile(a)}),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return r.upload()}),e._uU(7," Subir archivo "),e.qZA(),e.qZA(),e.qZA(),e.YNc(8,f,3,5,"div",5),e.YNc(9,T,2,1,"div",6)),2&t&&(e.xp6(6),e.Q6J("disabled",!r.selectedFiles),e.xp6(2),e.Q6J("ngIf",r.currentFile),e.xp6(1),e.Q6J("ngIf",r.message))},directives:[c.O5,c.PC],styles:[""]}),o})();var l=s(2382),A=s(6583),F=s(1970);function C(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",43),e._UZ(1,"input",44),e.TgZ(2,"button",45),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw(2).eliminar(a)}),e._uU(3,"Eliminar este ingrediente"),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,r=i.index,n=e.oxw(2);e.xp6(1),e.s9C("name",t),e.Q6J("ngModel",n.ingredientes[r].toUpperCase()+" - "+t)}}function b(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",24),e.TgZ(2,"label",40),e._uU(3,"Ingredientes y Cantidades"),e.qZA(),e.TgZ(4,"div",41),e.YNc(5,C,4,2,"div",42),e.qZA(),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Si has terminado de a\xf1adir ingredientes y est\xe1s seguro, pulsa CONFIRMAR INGREDIENTES."),e.qZA(),e.TgZ(8,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().crearLinea()}),e._uU(9,"CONFIRMAR INGREDIENTES"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.cantidades)}}function M(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",43),e._UZ(1,"input",44),e.TgZ(2,"button",45),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw(2).eliminarPaso(a)}),e._uU(3,"Eliminar este paso"),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,r=i.index;e.xp6(1),e.s9C("name",t),e.Q6J("ngModel",r+".  "+t.toUpperCase())}}function q(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",24),e.TgZ(2,"label",40),e._uU(3,"Elaboraci\xf3n de la receta"),e.qZA(),e.TgZ(4,"div",41),e.YNc(5,M,4,2,"div",42),e.qZA(),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Si est\xe1s seguro que estos son los pasos a seguir en la receta, pulsa CONFIRMAR PASOS."),e.qZA(),e.TgZ(8,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmarPasos()}),e._uU(9,"CONFIRMAR PASOS"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.pasos)}}const U=[{path:"",component:(()=>{class o{constructor(t,r,n){this.recipeService=t,this.uploadService=r,this.route=n,this.ingrediente="",this.paso="",this.pasos=[],this.ingredientes=[],this.cantidades=[],this.category=0,this.recipe={recipeName:"",method:[],category:0,ingredientLine:[],file:this.file}}ngOnInit(){}agregarIngrediente(){this.ingredientes.includes(this.ingrediente)||this.ingredientes.push(this.ingrediente)}agregarCantidad(){this.cantidades.push(this.cantidad),this.ingrediente="",this.cantidad=0}eliminar(t){this.ingredientes.splice(t,1),this.cantidades.splice(t,1)}crearLinea(){if(this.ingredientes.length==this.cantidades.length)for(let t=0;t<this.ingredientes.length;t++)this.recipe.ingredientLine.push({ingredient:this.ingredientes[t],amount:this.cantidades[t]});else u().fire("Error","Recuerda que debes a\xf1adir una cantidad para cada ingrediente","error"),this.ingredientes=[],this.cantidades=[]}agregarPaso(){this.pasos.includes(this.paso)||this.pasos.push(this.paso)}eliminarPaso(t){this.pasos.splice(t,1)}confirmarPasos(){this.recipe.method=this.pasos}publicar(){this.uploadService.getFileByName().subscribe({next:t=>{this.file=t,""!=this.recipe.recipeName&&this.recipe.method.length>0&&0!=this.recipe.category&&this.recipe.ingredientLine.length>0?(this.recipe.file=this.file,this.recipeService.publicar(this.recipe).subscribe({next:r=>{u().fire({title:"Receta publicada",text:"Su receta se ha publicado con \xe9xito",icon:"info",confirmButtonText:"Aceptar"}).then(n=>{n.isConfirmed&&this.route.navigateByUrl("publicar")})},error:r=>{u().fire("Error","No se puede publicar la receta. "+r.error.mensaje,"error")}})):u().fire("Error","Todos los campos de la receta deben estar rellenos.","error")},error:t=>{console.log(t)}})}back(){history.back()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.v),e.Y36(g.J),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-mostrar-formu"]],decls:74,vars:7,consts:[[1,"row","my-2","justify-content-center"],[1,"col-12","m-1"],[1,"m-3"],[1,"card"],[1,"card-header","colorYellowP","m-2"],[1,"card-heading","text-center"],[1,"card-body"],[1,"mb-2"],[1,"text-muted","text-sm","mb-3","d-none","d-md-block","d-sm-block"],[3,"ngSubmit"],[1,"row"],[1,"col-md"],[1,"form-floating","mb-3"],["type","text","id","floatingInputGrid","placeholder","T\xedtulo de la Receta","name","recipeName","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInputGrid"],["id","floatingSelectGrid","placeholder","Categor\xeda","name","category","required","",1,"form-select","pb-1",3,"ngModel","ngModelChange"],["selected",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["for","floatingSelectGrid"],[1,"mb-3","row"],[1,"col-form-label"],[1,"input-group"],["placeholder","A\xf1adir ingrediente","name","ingredient",1,"form-control","p-2",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"btn","colorPinkP",3,"click"],["placeholder","A\xf1adir cantidad en gramos","name","amount",1,"form-control","p-2",3,"ngModel","ngModelChange","keyup.enter"],[4,"ngIf"],["placeholder","A\xf1adir Paso","name","step",1,"form-control","p-2",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"btn","colorGreenP",3,"click"],["type","submit",1,"btn","colorPurpleP","mt-2"],[1,"card-footer","colorYellowP","m-2","text-center"],[1,"text-sm","text-muted"],[1,"row","p-1","my-3","justify-content-center"],[1,"text-center","mb-2"],[1,"btn","colorPurpleP",3,"click"],["ubicacion","Publicar Receta"],[1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["class","input-group col-md",4,"ngFor","ngForOf"],[1,"input-group","col-md"],["required","",1,"form-control",3,"name","ngModel"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e._uU(6,"Foodie Crush"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"h5",7),e._uU(9," En primer lugar, muchas gracias por compartir tu receta \u{1f60a} "),e.qZA(),e.TgZ(10,"p",8),e._uU(11,"Es muy sencillo. Tan solo tienes que rellenar los siguientes campos con la informaci\xf3n que se detalla en cada uno de ellos."),e.qZA(),e._UZ(12,"app-archivo-upload"),e.TgZ(13,"form",9),e.NdJ("ngSubmit",function(){return r.publicar()}),e.TgZ(14,"div",10),e.TgZ(15,"div",11),e.TgZ(16,"div",12),e.TgZ(17,"input",13),e.NdJ("ngModelChange",function(a){return r.recipe.recipeName=a}),e.qZA(),e.TgZ(18,"label",14),e._uU(19,"T\xedtulo de la receta"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",11),e.TgZ(21,"div",12),e.TgZ(22,"select",15),e.NdJ("ngModelChange",function(a){return r.recipe.category=a}),e.TgZ(23,"option",16),e._uU(24,"Escoger..."),e.qZA(),e.TgZ(25,"option",17),e._uU(26,"Pasta"),e.qZA(),e.TgZ(27,"option",18),e._uU(28,"Arroz"),e.qZA(),e.TgZ(29,"option",19),e._uU(30,"Carne"),e.qZA(),e.TgZ(31,"option",20),e._uU(32,"Pescados"),e.qZA(),e.TgZ(33,"option",21),e._uU(34,"Postres"),e.qZA(),e.TgZ(35,"option",22),e._uU(36,"Otros"),e.qZA(),e.qZA(),e.TgZ(37,"label",23),e._uU(38,"Selecciona una categor\xeda para tu receta"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",24),e.TgZ(40,"div",11),e.TgZ(41,"label",25),e._uU(42,"\xbfQu\xe9 ingredientes necesitamos?"),e.qZA(),e.TgZ(43,"div",26),e.TgZ(44,"input",27),e.NdJ("ngModelChange",function(a){return r.ingrediente=a})("keyup.enter",function(){return r.agregarIngrediente()}),e.qZA(),e.TgZ(45,"button",28),e.NdJ("click",function(){return r.agregarIngrediente()}),e._uU(46,"A\xf1adir"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"div",11),e.TgZ(48,"label",25),e._uU(49,"\xbfQu\xe9 cantidad (en gramos)?"),e.qZA(),e.TgZ(50,"div",26),e.TgZ(51,"input",29),e.NdJ("ngModelChange",function(a){return r.cantidad=a})("keyup.enter",function(){return r.agregarCantidad()}),e.qZA(),e.TgZ(52,"button",28),e.NdJ("click",function(){return r.agregarCantidad()}),e._uU(53,"A\xf1adir"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(54,b,10,1,"div",30),e.TgZ(55,"div",24),e.TgZ(56,"label",25),e._uU(57,"Escribe a continuaci\xf3n los pasos a seguir en la receta:"),e.qZA(),e.TgZ(58,"div",26),e.TgZ(59,"input",31),e.NdJ("ngModelChange",function(a){return r.paso=a})("keyup.enter",function(){return r.agregarPaso()}),e.qZA(),e.TgZ(60,"button",32),e.NdJ("click",function(){return r.agregarPaso()}),e._uU(61,"A\xf1adir"),e.qZA(),e.qZA(),e.qZA(),e.YNc(62,q,10,1,"div",30),e.TgZ(63,"button",33),e._uU(64,"PUBLICAR"),e.qZA(),e.qZA(),e.TgZ(65,"div",34),e.TgZ(66,"div",35),e._uU(67," \xa1Gracias! "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(68,"div",36),e.TgZ(69,"div",37),e.TgZ(70,"button",38),e.NdJ("click",function(){return r.back()}),e._uU(71,"VOLVER"),e.qZA(),e.qZA(),e.qZA(),e._UZ(72,"app-scroll-to-top",39),e._UZ(73,"app-font-size")),2&t&&(e.xp6(17),e.Q6J("ngModel",r.recipe.recipeName),e.xp6(5),e.Q6J("ngModel",r.recipe.category),e.xp6(22),e.Q6J("ngModel",r.ingrediente),e.xp6(7),e.Q6J("ngModel",r.cantidad),e.xp6(3),e.Q6J("ngIf",r.cantidades.length>0),e.xp6(5),e.Q6J("ngModel",r.paso),e.xp6(3),e.Q6J("ngIf",r.pasos.length>0))},directives:[v,l._Y,l.JL,l.F,l.Fj,l.Q7,l.JJ,l.On,l.EJ,l.YN,l.Kr,c.O5,A.H,F.G,c.sg],styles:[""]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.Bz.forChild(U)],d.Bz]}),o})();var x=s(4466);let N=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,y,l.u5,x.m]]}),o})()}}]);